
Archivo System

```sql
--1) CREAR TABLA
-- EJECUTA USUARIO SYSTEM

CREATE TABLE CLIENTES( 
RUTCLIEMPRESA VARCHAR2(12) NOT NULL PRIMARY KEY, 
NOMCLIEMPRESA VARCHAR2(20), 
FONOCLIEMPRESA NUMBER(9), 
EMAILCLIEMPRESA VARCHAR2(20) 
); 

CREATE TABLE LIDERES( 
RUT VARCHAR2(12) NOT NULL PRIMARY KEY, 
CARGO VARCHAR2(20), 
DEPTO VARCHAR2(20), 
FECHACONTRATO DATE 
); 

CREATE TABLE PROYECTOS( 
NUMPROYECTO VARCHAR2(12) NOT NULL PRIMARY KEY, 
FECHAINICIO DATE, 
PRESUPUESTO NUMBER(10), 
RUTLIDER VARCHAR2(12) NOT NULL REFERENCES LIDERES, 
RUTCLIEMPRESA VARCHAR2(12) NOT NULL REFERENCES CLIENTES 
); 

-- 2) TAMBIÉN CREARÁ LOS SIGUIENTES USUARIOS Y LES ASIGNARÁ LOS PERMISOS INDICADOS

-- EJECUTA USUARIO system

-- CREACIÓN USUARIO SOPORTE

CREATE USER SOPORTE IDENTIFIED BY 123 DEFAULT TABLESPACE USERS;
CREATE USER SUPERVISOR IDENTIFIED BY 123 DEFAULT TABLESPACE USERS;

-- ASIGNAR PERMISO DE CONEXION
GRANT CONNECT TO SOPORTE;
GRANT CONNECT TO SUPERVISOR;

-- CREAR ROLES
CREATE ROLE SOPORTEROLE;
CREATE ROLE SUPERVISORROLE;

-- ASIGNAR PERMISOS SOBRE TABLAS
GRANT SELECT, INSERT, UPDATE, DELETE ON CLIENTES TO SOPORTEROLE;

GRANT SELECT, INSERT, UPDATE, DELETE ON PROYECTOS TO SUPERVISORROLE;
GRANT SELECT, INSERT, UPDATE, DELETE ON LIDERES TO SUPERVISORROLE;


-- ASIGNAR ROLES A USUARIOS
GRANT SOPORTEROLE TO SOPORTE;
GRANT SUPERVISORROLE TO SUPERVISOR;
COMMIT;


```


Archivo Soporte

```sql
--B1) INSERTAR 10 CLIENTES
-- EJECUTA USUARIO SOPORTE

insert into system.clientes  values('14060183-9','Johanna',91424560,'Johanna@empresa.cl'); 
insert into system.clientes  values('14345181-8','Javier',929563810,'Javier@empresa.cl'); 
insert into system.clientes  values('16450188-9','Felipe',920977263,'Felipe@empresa.cl'); 
insert into system.clientes  values('23060187-5','Claudio',910093746,'Caudio@empresa.cl'); 
insert into system.clientes  values('14060180-k','Constanza',991827423,'Cony@empresa.cl'); 
insert into system.clientes  values('17047584-2','John',928374641,'John@empresa.cl'); 
insert into system.clientes  values('23060952-4','Ethan',956301748,'Ethan@empresa.cl'); 
insert into system.clientes  values('16062831-1','Jose Luis',911293751,'Jose@empresa.cl'); 
insert into system.clientes  values('17019267-8','Fenrico',913284593,'Fenrico@empresa.cl'); 
insert into system.clientes  values('21062945-k','Katherine',917284584,'Katherine@empresa.cl'); 

SELECT * FROM SYSTEM.CLIENTES;
COMMIT;

-- B2) MODIFICAR EL FONO DE UN CLIENTE
-- EJECUTA USUARIO SOPORTE

UPDATE SYSTEM.CLIENTES SET FONOCLIEMPRESA = 988889999 WHERE RUTCLIEMPRESA = '14060183-9';
SELECT * FROM SYSTEM.CLIENTES;
COMMIT;


```


Archivo Supervisor

```sql
--B1) INSERTAR... 4 LIDERES Y 10 PROYECTOS
--EJECUTA USUARIO SUPERVISOR
Insert into system.lideres values('15928376-3','Tecnico de personal','Recursos humanos','14/07/2023'); 
Insert into system.lideres values('16432113-k','Contador','Finanzas','18/07/2023'); 
Insert into system.lideres values('14829333-1','Ingeniero','TI','20/03/2020'); 
Insert into system.lideres values('15472985-2','Analista','TI','14/04/2020'); 


Insert into system.proyectos values('101','14/05/2024',50000,'15928376-3','14060183-9'); 
Insert into system.proyectos values('102','12/06/2024',30000,'16432113-k','14345181-8'); 
Insert into system.proyectos values('103','21/07/2024',25000,'15928376-3','16450188-9'); 
Insert into system.proyectos values('104','22/08/2024',70000,'16432113-k','23060187-5'); 
Insert into system.proyectos values('105','11/09/2024',456000,'15928376-3','14060180-k'); 
Insert into system.proyectos values('106','18/10/2024',42000,'14829333-1','17047584-2'); 
Insert into system.proyectos values('107','19/11/2024',85600,'15472985-2','23060952-4'); 
Insert into system.proyectos values('108','27/12/2024',132000,'15928376-3','16062831-1'); 
Insert into system.proyectos values('109','31/01/2025',945600,'14829333-1', '17019267-8'); 
Insert into system.proyectos values('110','27/02/2025',1000000,'15472985-2','21062945-k'); 
COMMIT;


-- B3) ELIMINAR UN PROYECTO
-- EJECUTA USUARIO SUPERVISOR
DELETE FROM SYSTEM.PROYECTOS WHERE NUMPROYECTO = '101'; 
COMMIT;


-- B4) SIN REPETIR LOS CARGOS QUE EMPIECEN CON UNA LETRA INDICADA POR USTED Y QUE TENGAN PROYECTOS ASOCIADOS
--EJECUTA USUARIO SUPERVISOR
SELECT DISTINCT CARGO FROM SYSTEM.LIDERES, SYSTEM.PROYECTOS WHERE RUT = RUTLIDER AND CARGO LIKE 'A%';


--B5)  FECHAS DE PROYECTOS PARA AQUELLOS CUYOS PRESUPUESTOS ESTEN EN UN RANGO INDICADO POR USTED.
--EJECUTA USUARIO SUPERVISOR

SELECT FECHAINICIO FROM SYSTEM.PROYECTOS WHERE PRESUPUESTO BETWEEN 50000 AND 100000; 

--B6) EL NUMERO DE PROYECTO CON MENOR PRESUPUESTO
--EJECUTA USUARIO SUPERVISOR

SELECT NUMPROYECTO FROM SYSTEM.PROYECTOS WHERE PRESUPUESTO = ( SELECT MIN(PRESUPUESTO) FROM SYSTEM.PROYECTOS);

--B7) EL CARGO DE LIDER CON MAYOR PRESUPUESTO
--EJECUTA USUARIO SUPERVISOR

SELECT CARGO FROM SYSTEM.LIDERES WHERE RUT = (SELECT RUTLIDER FROM SYSTEM.PROYECTOS WHERE PRESUPUESTO = (SELECT MAX(PRESUPUESTO) FROM SYSTEM.PROYECTOS));



```



Archivo final

```sql
--1) CREAR TABLA
-- EJECUTA USUARIO SYSTEM

CREATE TABLE CLIENTES( 
RUTCLIEMPRESA VARCHAR2(12) NOT NULL PRIMARY KEY, 
NOMCLIEMPRESA VARCHAR2(20), 
FONOCLIEMPRESA NUMBER(9), 
EMAILCLIEMPRESA VARCHAR2(20) 
); 

CREATE TABLE LIDERES( 
RUT VARCHAR2(12) NOT NULL PRIMARY KEY, 
CARGO VARCHAR2(20), 
DEPTO VARCHAR2(20), 
FECHACONTRATO DATE 
); 

CREATE TABLE PROYECTOS( 
NUMPROYECTO VARCHAR2(12) NOT NULL PRIMARY KEY, 
FECHAINICIO DATE, 
PRESUPUESTO NUMBER(10), 
RUTLIDER VARCHAR2(12) NOT NULL REFERENCES LIDERES, 
RUTCLIEMPRESA VARCHAR2(12) NOT NULL REFERENCES CLIENTES 
); 

-- 2) TAMBIÉN CREARÁ LOS SIGUIENTES USUARIOS Y LES ASIGNARÁ LOS PERMISOS INDICADOS
-- EJECUTA USUARIO system

-- CREACIÓN USUARIO SOPORTE
CREATE USER SOPORTE IDENTIFIED BY 123 DEFAULT TABLESPACE USERS;
CREATE USER SUPERVISOR IDENTIFIED BY 123 DEFAULT TABLESPACE USERS;

-- ASIGNAR PERMISO DE CONEXION
GRANT CONNECT TO SOPORTE;
GRANT CONNECT TO SUPERVISOR;

-- CREAR ROLES
CREATE ROLE SOPORTEROLE;
CREATE ROLE SUPERVISORROLE;

-- ASIGNAR PERMISOS SOBRE TABLAS
GRANT SELECT, INSERT, UPDATE, DELETE ON CLIENTES TO SOPORTEROLE;

GRANT SELECT, INSERT, UPDATE, DELETE ON PROYECTOS TO SUPERVISORROLE;
GRANT SELECT, INSERT, UPDATE, DELETE ON LIDERES TO SUPERVISORROLE;


-- ASIGNAR ROLES A USUARIOS
GRANT SOPORTEROLE TO SOPORTE;
GRANT SUPERVISORROLE TO SUPERVISOR;
COMMIT;

--------------------------------------------------------------------------------------------------------------------

--B1) INSERTAR 10 CLIENTES
-- EJECUTA USUARIO SOPORTE

insert into system.clientes values('14060183-9','Johanna',91424560,'Johanna@empresa.cl'); 
insert into system.clientes values('14345181-8','Javier',929563810,'Javier@empresa.cl'); 
insert into system.clientes values('16450188-9','Felipe',920977263,'Felipe@empresa.cl'); 
insert into system.clientes values('23060187-5','Claudio',910093746,'Caudio@empresa.cl'); 
insert into system.clientes values('14060180-k','Constanza',991827423,'Cony@empresa.cl'); 
insert into system.clientes values('17047584-2','John',928374641,'John@empresa.cl'); 
insert into system.clientes values('23060952-4','Ethan',956301748,'Ethan@empresa.cl'); 
insert into system.clientes values('16062831-1','Jose Luis',911293751,'Jose@empresa.cl'); 
insert into system.clientes values('17019267-8','Fenrico',913284593,'Fenrico@empresa.cl'); 
insert into system.clientes values('21062945-k','Katherine',917284584,'Katherine@empresa.cl'); 
COMMIT;


--B1) INSERTAR... 4 LIDERES Y 10 PROYECTOS
--EJECUTA USUARIO SUPERVISOR
Insert into system.lideres values('15928376-3','Tecnico de personal','Recursos humanos','14/07/2023'); 
Insert into system.lideres values('16432113-k','Contador','Finanzas','18/07/2023'); 
Insert into system.lideres values('14829333-1','Ingeniero','TI','20/03/2020'); 
Insert into system.lideres values('15472985-2','Analista','TI','14/04/2020'); 


Insert into system.proyectos values('101','14/05/2024',50000,'15928376-3','14060183-9'); 
Insert into system.proyectos values('102','12/06/2024',30000,'16432113-k','14345181-8'); 
Insert into system.proyectos values('103','21/07/2024',25000,'15928376-3','16450188-9'); 
Insert into system.proyectos values('104','22/08/2024',70000,'16432113-k','23060187-5'); 
Insert into system.proyectos values('105','11/09/2024',456000,'15928376-3','14060180-k'); 
Insert into system.proyectos values('106','18/10/2024',42000,'14829333-1','17047584-2'); 
Insert into system.proyectos values('107','19/11/2024',85600,'15472985-2','23060952-4'); 
Insert into system.proyectos values('108','27/12/2024',132000,'15928376-3','16062831-1'); 
Insert into system.proyectos values('109','31/01/2025',945600,'14829333-1', '17019267-8'); 
Insert into system.proyectos values('110','27/02/2025',1000000,'15472985-2','21062945-k'); 
COMMIT;

-- B2) MODIFICAR EL FONO DE UN CLIENTE
-- EJECUTA USUARIO SOPORTE

UPDATE SYSTEM.CLIENTES SET FONOCLIEMPRESA = 988889999 WHERE RUTCLIEMPRESA = '14060183-9';
SELECT * FROM SYSTEM.CLIENTES;
COMMIT;


-- B3) ELIMINAR UN PROYECTO
-- EJECUTA USUARIO SUPERVISOR
DELETE FROM SYSTEM.PROYECTOS WHERE NUMPROYECTO = '101'; 
COMMIT;


-- B4) SIN REPETIR LOS CARGOS QUE EMPIECEN CON UNA LETRA INDICADA POR USTED Y QUE TENGAN PROYECTOS ASOCIADOS
--EJECUTA USUARIO SUPERVISOR
SELECT DISTINCT CARGO FROM SYSTEM.LIDERES, SYSTEM.PROYECTOS WHERE RUT = RUTLIDER AND CARGO LIKE 'A%';


--B5)  FECHAS DE PROYECTOS PARA AQUELLOS CUYOS PRESUPUESTOS ESTEN EN UN RANGO INDICADO POR USTED.
--EJECUTA USUARIO SUPERVISOR

SELECT FECHAINICIO FROM SYSTEM.PROYECTOS WHERE PRESUPUESTO BETWEEN 50000 AND 100000; 


--B6) EL NUMERO DE PROYECTO CON MENOR PRESUPUESTO
--EJECUTA USUARIO SUPERVISOR

SELECT NUMPROYECTO FROM SYSTEM.PROYECTOS WHERE PRESUPUESTO = ( SELECT MIN(PRESUPUESTO) FROM SYSTEM.PROYECTOS);


--B7) EL CARGO DE LIDER CON MAYOR PRESUPUESTO
--EJECUTA USUARIO SUPERVISOR

SELECT CARGO FROM SYSTEM.LIDERES WHERE RUT = (SELECT RUTLIDER FROM SYSTEM.PROYECTOS WHERE PRESUPUESTO = (SELECT MAX(PRESUPUESTO) FROM SYSTEM.PROYECTOS));




```
