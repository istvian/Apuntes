# Consumo de servicios externos

## Definición:
La integración con servicios externos se refiere a que diferentes servicios web, sistemas y software de aplicación se conecten entre sí y compartan datos.  

Las aplicaciones, entre ellas, pueden consumir web service, independiente del sistema operativo o tecnologia.  

La mayoria de las empresas han aumentado sus requerimientos por aplicaciones externas  

Para lograr la integración se necesita una interfaz (API= Application Programming Interface = Interfaz de programación de aplicaciones)  

Permite la conexión entre aplicaciones a través de bibliotecas que son usadas entre dos aplicaciones. O sea, es un "canal" que es usado por todos y no es necesario reescribirlo cada vez que se necesite ocupar.  

Por ejemplo: Construiremos una página web, usando PHP, la cual será nuestra API  

Las aplicaciones web, utilizan las APIs interactuan usando el HTTP.

#### Software a utilizar
- PHP
- MySQL
- Python

PHP = Hypertext Preprocessor  

## Usando PHP

Ejemplo

```php
<!DOCTYPE html>
<html lang="es"> <!-Comienza el código html->
  <head>
    <title>Prueba de PHP</title>
  </head>
  <body>
    <?php #Comienza el código php
    echo "<p>Hola Mundo</p>"; 
    ?>
  </body>
</html>
```

Hay que guardar el archivo en el servidor Apache en una carpeta especifica.

***C:\AppServ\www\ej1\index.php***

Borramos todo excepto el php

```php
<?php #Comienza el código php
echo "<p>Hola Mundo</p>";
?>
```

## PHP

### Variables
Las variables comienzan con el simbolo $  

Ejemplo:

```php
<?php
echo "<p>Cálculo de IVA</p>\n";
$monto = 20000;
echo "<p>Monto inicial=" . $monto . "</p>\n";
$montoFinal = $monto * 1.19;
echo "Total con IVA=" . $montoFinal;
?>
```

## JSON (Javascript Object Notation)

Es un formato de texto ligero para el intercambio de datos y es independiente de cualquier lenguaje de programación. Reduce el tamaño de los archivos y el volumen de datos que es necesario transmitir.  

Ejemplo: Utilizaremos una matriz o array en php y la mostraremos en JSON

```php
<?php
$array4 = array(
  array("num.fact." => 2334557, "rut cli." => "11345324-5", "monto" => 45000),
  array("num.fact." => 2334558, "rut cli." => "11222333-4", "monto" => 34000),
);
print_r(json_encode($array4));
?>
```

```json
[
    {
        "num.fact.": 2334557,
        "rut cli.": "11345324-5",
        "monto": 45000
    },
    {
        "num.fact.": 2334558,
        "rut cli.": "11222333-4",
        "monto": 34000
    }
]
```
Entrega una ***lista*** con ***diccionarios***

